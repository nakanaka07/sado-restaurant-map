function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,n,r={exports:{}},o={};function i(){if(t)return o;t=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,h={};function y(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||g}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||g}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var E=b.prototype=new v;E.constructor=b,m(E,y.prototype),E.isPureReactComponent=!0;var C=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function w(t,n,r,o,i,s){return r=s.ref,{$$typeof:e,type:t,key:n,ref:void 0!==r?r:null,props:s}}function O(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var P=/\/+/g;function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function k(){}function I(t,r,o,i,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l,u,c=!1;if(null===t)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case e:case n:c=!0;break;case f:return I((c=t._init)(t._payload),r,o,i,s)}}if(c)return s=s(t),c=""===i?"."+L(t,0):i,C(s)?(o="",null!=c&&(o=c.replace(P,"$&/")+"/"),I(s,r,o,"",function(e){return e})):null!=s&&(O(s)&&(l=s,u=o+(null==s.key||t&&t.key===s.key?"":(""+s.key).replace(P,"$&/")+"/")+c,s=w(l.type,u,void 0,0,0,l.props)),r.push(s)),1;c=0;var d,g=""===i?".":i+":";if(C(t))for(var m=0;m<t.length;m++)c+=I(i=t[m],r,o,a=g+L(i,m),s);else if("function"==typeof(m=null===(d=t)||"object"!=typeof d?null:"function"==typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(t=m.call(t),m=0;!(i=t.next()).done;)c+=I(i=i.value,r,o,a=g+L(i,m++),s);else if("object"===a){if("function"==typeof t.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(k,k):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,o,i,s);throw r=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return c}function M(e,t,n){if(null==e)return e;var r=[],o=0;return I(e,r,"","",function(e){return t.call(n,e,o++)}),r}function x(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}return o.Children={map:M,forEach:function(e,t,n){M(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return M(e,function(){t++}),t},toArray:function(e){return M(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o.Component=y,o.Fragment=r,o.Profiler=s,o.PureComponent=b,o.StrictMode=i,o.Suspense=c,o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,o.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},o.cache=function(e){return function(){return e.apply(null,arguments)}},o.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!_.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var s=Array(i),a=0;a<i;a++)s[a]=arguments[a+2];r.children=s}return w(e.type,o,void 0,0,0,r)},o.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},o.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)_.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return w(e,i,void 0,0,0,o)},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:u,render:e}},o.isValidElement=O,o.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:x}},o.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),o=S.S;null!==o&&o(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(R,T)}catch(i){T(i)}finally{S.T=t}},o.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},o.use=function(e){return S.H.use(e)},o.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},o.useCallback=function(e,t){return S.H.useCallback(e,t)},o.useContext=function(e){return S.H.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},o.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},o.useId=function(){return S.H.useId()},o.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},o.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},o.useMemo=function(e,t){return S.H.useMemo(e,t)},o.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},o.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},o.useRef=function(e){return S.H.useRef(e)},o.useState=function(e){return S.H.useState(e)},o.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},o.useTransition=function(){return S.H.useTransition()},o.version="19.1.0",o}function s(){return n||(n=1,r.exports=i()),r.exports}var a=s();const l=e(a);var u,c,d={exports:{}},f={};function p(){if(u)return f;u=1;var e=s();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,f.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},f.flushSync=function(e){var t=i.T,n=r.p;try{if(i.T=null,r.p=2,e)return e()}finally{i.T=t,r.p=n,r.d.f()}},f.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},f.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},f.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,o=a(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:o,integrity:i,fetchPriority:s}):"script"===n&&r.d.X(e,{crossOrigin:o,integrity:i,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},f.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=a(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},f.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,o=a(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:o,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},f.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=a(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},f.requestFormReset=function(e){r.d.r(e)},f.unstable_batchedUpdates=function(e,t){return e(t)},f.useFormState=function(e,t,n){return i.H.useFormState(e,t,n)},f.useFormStatus=function(){return i.H.useHostTransitionStatus()},f.version="19.1.0",f}function g(){if(c)return d.exports;return c=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),d.exports=p(),d.exports}var m,h,y=g();const v=e(h?m:(h=1,m=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!==o--;){var s=i[o];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}));function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(null,arguments)}function E(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function C(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}const S="NOT_LOADED",_="LOADING",w="LOADED",O="FAILED",P="AUTH_FAILURE";class L{static async load(e,t){var n;const r=e.libraries?e.libraries.split(","):[],o=this.serializeParams(e);this.listeners.push(t),null!=(n=window.google)&&null!=(n=n.maps)&&n.importLibrary?(this.serializedApiParams||(this.loadingStatus=w),this.notifyLoadingStatusListeners()):(this.serializedApiParams=o,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==o&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const i=["maps",...r];await Promise.all(i.map(e=>google.maps.importLibrary(e)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary)return void console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");let t=null;const n=()=>t||(t=new Promise((t,n)=>{var r;const o=document.createElement("script"),i=new URLSearchParams;for(const[s,a]of Object.entries(e)){const e=s.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase());i.set(e,String(a))}i.set("loading","async"),i.set("callback","__googleMapsCallback__"),o.async=!0,o.src="https://maps.googleapis.com/maps/api/js?"+i.toString(),o.nonce=(null==(r=document.querySelector("script[nonce]"))?void 0:r.nonce)||"",o.onerror=()=>{this.loadingStatus=O,this.notifyLoadingStatusListeners(),n(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=w,this.notifyLoadingStatusListeners(),t()},window.gm_authFailure=()=>{this.loadingStatus=P,this.notifyLoadingStatusListeners()},this.loadingStatus=_,this.notifyLoadingStatusListeners(),document.head.append(o)}),t);google.maps.importLibrary=e=>n().then(()=>google.maps.importLibrary(e))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}L.loadingStatus=S,L.serializedApiParams=void 0,L.listeners=[];const k=["onLoad","onError","apiKey","version","libraries"],I=["children"],M=l.createContext(null);const x=e=>{const{children:t}=e,n=E(e,I),{mapInstances:r,addMapInstance:o,removeMapInstance:i,clearMapInstances:s}=function(){const[e,t]=a.useState({});return{mapInstances:e,addMapInstance:(e,n="default")=>{t(t=>b({},t,{[n]:e}))},removeMapInstance:(e="default")=>{t(t=>E(t,[e].map(C)))},clearMapInstances:()=>{t({})}}}(),{status:u,loadedLibraries:c,importLibrary:d}=function(e){const{onLoad:t,onError:n,apiKey:r,version:o,libraries:i=[]}=e,s=E(e,k),[l,u]=a.useState(L.loadingStatus),[c,d]=a.useReducer((e,t)=>e[t.name]?e:b({},e,{[t.name]:t.value}),{}),f=a.useMemo(()=>null==i?void 0:i.join(","),[i]),p=a.useMemo(()=>JSON.stringify(b({apiKey:r,version:o},s)),[r,o,s]),g=a.useCallback(async e=>{var t;if(c[e])return c[e];if(null==(t=google)||null==(t=t.maps)||!t.importLibrary)throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const n=await window.google.maps.importLibrary(e);return d({name:e,value:n}),n},[c]);return a.useEffect(()=>{(async()=>{try{const e=b({key:r},s);o&&(e.v=o),(null==f?void 0:f.length)>0&&(e.libraries=f),(void 0===e.channel||e.channel<0||e.channel>999)&&delete e.channel,void 0===e.solutionChannel?e.solutionChannel="GMP_visgl_rgmlibrary_v1_default":""===e.solutionChannel&&delete e.solutionChannel,await L.load(e,e=>u(e));for(const t of["core","maps",...i])await g(t);t&&t()}catch(e){n?n(e):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",e)}})()},[r,f,p]),{status:l,loadedLibraries:c,importLibrary:g}}(n),f=a.useMemo(()=>({mapInstances:r,addMapInstance:o,removeMapInstance:i,clearMapInstances:s,status:u,loadedLibraries:c,importLibrary:d}),[r,o,i,s,u,c,d]);return l.createElement(M.Provider,{value:f},t)};function T(e,t,n){const r={type:e,map:t,detail:{},stoppable:!1,stop:()=>{}};if(N.includes(e)){const e=r,n=t.getCenter(),o=t.getZoom(),i=t.getHeading()||0,s=t.getTilt()||0,a=t.getBounds();return n&&a&&Number.isFinite(o)||console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),e.detail={center:(null==n?void 0:n.toJSON())||{lat:0,lng:0},zoom:o||0,heading:i,tilt:s,bounds:(null==a?void 0:a.toJSON())||{north:90,east:180,south:-90,west:-180}},e}if(A.includes(e)){var o;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const e=r;return e.domEvent=n.domEvent,e.stoppable=!0,e.stop=()=>n.stop(),e.detail={latLng:(null==(o=n.latLng)?void 0:o.toJSON())||null,placeId:n.placeId},e}return r}const R={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},N=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],A=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],j=Object.keys(R);function D(e,t){const n=a.useRef(e);return t(e,n.current)||(n.current=e),n.current}function z(e,t){!function(e,t,n){a.useEffect(e,[D(t,n)])}(e,t,v)}const H=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function F(){var e;return(null==(e=a.useContext(M))?void 0:e.status)||S}function $(e){return function(e){return!(!e||"object"!=typeof e)&&"lat"in e&&"lng"in e&&Number.isFinite(e.lat)&&Number.isFinite(e.lng)}(e)?e:e.toJSON()}const U=()=>l.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"}},l.createElement("h2",null,"Error: AuthFailure"),l.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",l.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."));function B(){return F()===w}function G(e){const t=function(){const[,e]=a.useReducer(e=>e+1,0);return e}(),n=a.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return a.useEffect(()=>{if(!e)return;const r=google.maps.event.addListener(e,"bounds_changed",()=>{!function(e,t){const n=e.getCenter(),r=e.getZoom(),o=e.getHeading()||0,i=e.getTilt()||0,s=e.getBounds();n&&s&&Number.isFinite(r)||console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(t.current,{center:(null==n?void 0:n.toJSON())||{lat:0,lng:0},zoom:r||0,heading:o,tilt:i})}(e,n),t()});return()=>r.remove()},[e,t]),n}const V=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"],Z=["padding"];class J{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,t){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(t)}}function W(e,t){const n=B(),[r,o]=a.useState(null),[i,s]=function(){const[e,t]=a.useState(null);return[e,a.useCallback(e=>t(e),[t])]}(),l=G(r),{id:u,defaultBounds:c,defaultCenter:d,defaultZoom:f,defaultHeading:p,defaultTilt:g,reuseMaps:m,renderingType:h,colorScheme:y}=e,v=E(e,V),C=void 0!==e.zoom||void 0!==e.defaultZoom,S=void 0!==e.center||void 0!==e.defaultCenter;c||C&&S||console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!v.center&&d&&(v.center=d),!v.zoom&&Number.isFinite(f)&&(v.zoom=f),!v.heading&&Number.isFinite(p)&&(v.heading=p),!v.tilt&&Number.isFinite(g)&&(v.tilt=g);for(const a of Object.keys(v))void 0===v[a]&&delete v[a];const _=a.useRef(void 0);return a.useEffect(()=>{if(!i||!n)return;const{addMapInstance:r,removeMapInstance:s}=t,{mapId:a}=e,d=`${a||"default"}:${h||"default"}:${y||"LIGHT"}`;let f,p;if(m&&J.has(d)?(p=J.pop(d),f=p.getDiv(),i.appendChild(f),p.setOptions(v),setTimeout(()=>p.setCenter(p.getCenter()),0)):(f=document.createElement("div"),f.style.height="100%",i.appendChild(f),p=new google.maps.Map(f,b({},v,h?{renderingType:h}:{},y?{colorScheme:y}:{}))),o(p),r(p,u),c){const{padding:e}=c,t=E(c,Z);p.fitBounds(t,e)}else C&&S||p.fitBounds({east:180,west:-180,south:-90,north:90});if(_.current){const{mapId:e,cameraState:t}=_.current;e!==a&&p.setOptions(t)}return()=>{_.current={mapId:a,cameraState:l.current},f.remove(),m?J.push(d,p):google.maps.event.clearInstanceListeners(p),o(null),s(u)}},[i,n,u,e.mapId,e.renderingType,e.colorScheme]),[r,s,l]}J.entries={};const q=l.createContext(null),K=e=>{const{children:t,id:n,className:r,style:o}=e,i=a.useContext(M),s=F();if(!i)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[u,c,d]=W(e,i);!function(e,t,n){const r=n.center?$(n.center):null;let o=null,i=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(o=r.lat,i=r.lng);const s=Number.isFinite(n.zoom)?n.zoom:null,l=Number.isFinite(n.heading)?n.heading:null,u=Number.isFinite(n.tilt)?n.tilt:null;a.useLayoutEffect(()=>{if(!e)return;const n={};let r=!1;null===o||null===i||t.current.center.lat===o&&t.current.center.lng===i||(n.center={lat:o,lng:i},r=!0),null!==s&&t.current.zoom!==s&&(n.zoom=s,r=!0),null!==l&&t.current.heading!==l&&(n.heading=l,r=!0),null!==u&&t.current.tilt!==u&&(n.tilt=u,r=!0),r&&e.moveCamera(n)})}(u,d,e),function(e,t){for(const n of j){const r=t[n],o=R[n];a.useEffect(()=>{if(!e)return;if(!r)return;const t=google.maps.event.addListener(e,o,t=>{r(T(o,e,t))});return()=>t.remove()},[e,o,r])}}(u,e),function(e,t){const n={},r=Object.keys(t);for(const o of r)H.has(o)&&(n[o]=t[o]);z(()=>{e&&e.setOptions(n)},[n])}(u,e);const f=function(e,t){const{viewport:n,viewState:r}=t,o=!!n;return a.useLayoutEffect(()=>{if(!e||!r)return;const{latitude:t,longitude:n,bearing:o,pitch:i,zoom:s}=r;e.moveCamera({center:{lat:t,lng:n},heading:o,tilt:i,zoom:s+1})},[e,r]),o}(u,e),p=!!e.controlled;a.useEffect(()=>{if(u)return f&&u.setOptions({disableDefaultUI:!0}),(f||p)&&u.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{u.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}},[u,f,p,e.gestureHandling,e.keyboardShortcuts]);const g=e.center?$(e.center):null;let m=null,h=null;g&&Number.isFinite(g.lat)&&Number.isFinite(g.lng)&&(m=g.lat,h=g.lng);const y=a.useMemo(()=>{var t,n,r,o,i;return{center:{lat:null!=(t=m)?t:0,lng:null!=(n=h)?n:0},zoom:null!=(r=e.zoom)?r:0,heading:null!=(o=e.heading)?o:0,tilt:null!=(i=e.tilt)?i:0}},[m,h,e.zoom,e.heading,e.tilt]);a.useLayoutEffect(()=>{if(!u||!p)return;u.moveCamera(y);const e=u.addListener("bounds_changed",()=>{u.moveCamera(y)});return()=>e.remove()},[u,p,y]);const v=a.useMemo(()=>b({width:"100%",height:"100%",position:"relative",zIndex:f?-1:0},o),[o,f]),E=a.useMemo(()=>({map:u}),[u]);return s===P?l.createElement("div",{style:b({position:"relative"},r?{}:v),className:r},l.createElement(U,null)):l.createElement("div",b({ref:c,"data-testid":"map",style:r?void 0:v,className:r},n?{id:n}:{}),u?l.createElement(q.Provider,{value:E},t):null)};K.deckGLViewProps=!0;const Y=new Set;function X(...e){const t=JSON.stringify(e);Y.has(t)||(Y.add(t),console.error(...e))}const Q=(e=null)=>{const t=a.useContext(M),{map:n}=a.useContext(q)||{};if(null===t)return X("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=t;return null!==e?r[e]||null:n||(r.default||null)};function ee(e){const t=B(),n=a.useContext(M);return a.useEffect(()=>{t&&n&&n.importLibrary(e)},[t,n,e]),(null==n?void 0:n.loadedLibraries[e])||null}function te(e,t,n){a.useEffect(()=>{if(!e||!t||!n)return;const r=google.maps.event.addListener(e,t,n);return()=>r.remove()},[e,t,n])}function ne(e,t,n){a.useEffect(()=>{e&&(e[t]=n)},[e,t,n])}function re(e,t,n){a.useEffect(()=>{if(e&&t&&n)return e.addEventListener(t,n),()=>e.removeEventListener(t,n)},[e,t,n])}function oe(e){return e.nodeType===Node.ELEMENT_NODE}const ie=l.createContext(null),se={BOTTOM:["50%","100%"]},ae=({children:e,styles:t,className:n,anchorPoint:r})=>{const[o,i]=null!=r?r:se.BOTTOM;let s=`-${o}`,a=`-${i}`;o.trimStart().startsWith("-")&&(s=o.substring(1)),i.trimStart().startsWith("-")&&(a=i.substring(1));const u=`translate(50%, 100%) translate(${s}, ${a})`;return l.createElement("div",{style:{transform:u}},l.createElement("div",{className:n,style:t},e))};const le=a.forwardRef((e,t)=>{const{children:n,style:r,className:o,anchorPoint:i}=e,[s,u]=function(e){const[t,n]=a.useState(null),[r,o]=a.useState(null),i=Q(),s=ee("marker"),{children:l,onClick:u,className:c,onMouseEnter:d,onMouseLeave:f,onDrag:p,onDragStart:g,onDragEnd:m,collisionBehavior:h,clickable:y,draggable:v,position:b,title:E,zIndex:C}=e,S=a.Children.count(l);return a.useEffect(()=>{if(!i||!s)return;const e=new s.AdvancedMarkerElement;e.map=i,n(e);let t=null;return S>0&&(t=document.createElement("div"),t.isCustomMarker=!0,e.content=t,o(t)),()=>{var r;e.map=null,null==(r=t)||r.remove(),n(null),o(null)}},[i,s,S]),a.useEffect(()=>{null==t||!t.content||!oe(t.content)||S>0||(t.content.className=null!=c?c:"")},[t,c,S]),ne(t,"position",b),ne(t,"title",null!=E?E:""),ne(t,"zIndex",C),ne(t,"collisionBehavior",h),a.useEffect(()=>{t&&(t.gmpDraggable=void 0!==v?v:!!(p||g||m))},[t,v,p,m,g]),a.useEffect(()=>{if(!t)return;const e=void 0!==y||Boolean(u)||Boolean(d)||Boolean(f);t.gmpClickable=e,e&&null!=t&&t.content&&oe(t.content)&&(t.content.style.pointerEvents="none",t.content.firstElementChild&&(t.content.firstElementChild.style.pointerEvents="all"))},[t,y,u,d,f]),te(t,"click",u),te(t,"drag",p),te(t,"dragstart",g),te(t,"dragend",m),re(null==t?void 0:t.element,"mouseenter",d),re(null==t?void 0:t.element,"mouseleave",f),[t,r]}(e),c=a.useMemo(()=>s?{marker:s}:null,[s]);return a.useImperativeHandle(t,()=>s,[s]),u?l.createElement(ie.Provider,{value:c},y.createPortal(l.createElement(ae,{anchorPoint:i,styles:r,className:o},n),u)):null});function ue(e,t,n){const r=0===t.indexOf("--");var o;null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||(o=t,ce.has(o))?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}const ce=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);const de=["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"],fe=e=>{const{children:t,headerContent:n,style:r,className:o,pixelOffset:i,anchor:s,shouldFocus:u,onClose:c,onCloseClick:d}=e,f=E(e,de),p=ee("maps"),[g,m]=a.useState(null),h=a.useRef(null),b=a.useRef(null),C=D(f,v);a.useEffect(()=>{if(!p)return;h.current=document.createElement("div"),b.current=document.createElement("div");const e=C;i&&(e.pixelOffset=new google.maps.Size(i[0],i[1])),n&&(e.headerContent="string"==typeof n?n:b.current);const t=new google.maps.InfoWindow(C);return t.setContent(h.current),m(t),()=>{var e,n;t.setContent(null),null==(e=h.current)||e.remove(),null==(n=b.current)||n.remove(),h.current=null,b.current=null,m(null)}},[p]);const S=a.useRef(null);a.useEffect(()=>{g&&h.current&&(!function(e,t,n){if(null!=t&&"object"!=typeof t)throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const r=e.style;if(null!=n){for(const e in n)!n.hasOwnProperty(e)||null!=t&&t.hasOwnProperty(e)||(0===e.indexOf("--")?r.setProperty(e,""):"float"===e?r.cssFloat="":r[e]="");if(null!=t)for(const e in t){const o=t[e];t.hasOwnProperty(e)&&n[e]!==o&&ue(r,e,o)}}else{if(null==t)return;for(const e in t)t.hasOwnProperty(e)&&ue(r,e,t[e])}}(h.current,r||null,S.current),S.current=r||null,o!==h.current.className&&(h.current.className=o||""))},[g,o,r]),a.useEffect(()=>{if(!g)return;const e=C;e.pixelOffset=i?new google.maps.Size(i[0],i[1]):null,e.headerContent=n?"string"==typeof n?n:b.current:null,g.setOptions(C)},[C,i,n]),te(g,"close",c),te(g,"closeclick",d);const _=Q();return a.useEffect(()=>{if(!_||!g||null===s)return;const e=!!s,t={map:_};if(s&&(t.anchor=s,void 0!==s.content&&s.content instanceof Element)){const e=s.content,t=null==e?void 0:e.getBoundingClientRect();if(t&&null!=e&&e.isCustomMarker){var n;const e=null==(n=s.content.firstElementChild)?void 0:n.firstElementChild,r=null==e?void 0:e.getBoundingClientRect(),o=r.x-t.x+(r.width-t.width)/2,a=r.y-t.y,l=C;l.pixelOffset=new google.maps.Size(i?i[0]+o:o,i?i[1]+a:a),g.setOptions(l)}}return void 0!==u&&(t.shouldFocus=u),g.open(t),()=>{e&&g.set("anchor",null),g.close()}},[g,s,_,u,C,i]),l.createElement(l.Fragment,null,h.current&&y.createPortal(t,h.current),null!==b.current&&y.createPortal(n,b.current))},pe=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];a.forwardRef((e,t)=>{const n=function(e){const[t,n]=a.useState(null),r=Q(),{onClick:o,onDrag:i,onDragStart:s,onDragEnd:l,onMouseOver:u,onMouseOut:c}=e,d=E(e,pe),{position:f,draggable:p}=d;return a.useEffect(()=>{if(!r)return void(void 0===r&&console.error("<Marker> has to be inside a Map component."));const e=new google.maps.Marker(d);return e.setMap(r),n(e),()=>{e.setMap(null),n(null)}},[r]),a.useEffect(()=>{if(!t)return;const e=t,n=google.maps.event;return o&&n.addListener(e,"click",o),i&&n.addListener(e,"drag",i),s&&n.addListener(e,"dragstart",s),l&&n.addListener(e,"dragend",l),u&&n.addListener(e,"mouseover",u),c&&n.addListener(e,"mouseout",c),t.setDraggable(Boolean(p)),()=>{n.clearInstanceListeners(e)}},[t,p,o,i,s,l,u,c]),a.useEffect(()=>{t&&d&&t.setOptions(d)},[t,d]),a.useEffect(()=>{!p&&f&&t&&t.setPosition(f)},[p,f,t]),t}(e);return a.useImperativeHandle(t,()=>n,[n]),l.createElement(l.Fragment,null)});const ge=e=>{var t;const n=null==(t=a.useContext(ie))?void 0:t.marker,r=a.useMemo(()=>document.createElement("div"),[]);return a.useEffect(()=>{var t;if(!n)return void(void 0===n&&console.error("The <Pin> component can only be used inside <AdvancedMarker>."));e.glyph&&e.children&&X("The <Pin> component only uses children to render the glyph if both the glyph property and children are present."),a.Children.count(e.children)>1&&X("Passing multiple children to the <Pin> component might lead to unexpected results.");const o=b({},e),i=new google.maps.marker.PinElement(o);e.children&&(i.glyph=r);const s=null==(t=n.content)||null==(t=t.firstChild)?void 0:t.firstChild;for(;null!=s&&s.firstChild;)s.removeChild(s.firstChild);s&&s.appendChild(i.element)},[n,r,e]),y.createPortal(e.children,r)};export{le as A,fe as I,K as M,ge as P,g as a,a as b,x as c,s as r};
//# sourceMappingURL=google-maps-CsjYe35k.js.map
