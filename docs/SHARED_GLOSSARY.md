# Shared Glossary & Alignment Sheet

このドキュメントは、開発者(あなた) と AI アシスタント(本Copilot Chat) 間の用語・品質判断基準・タスク運用ルールの共有ベースラインです。継続的に更新し、PR で差分可視化します。

## 1. 目的

- 認識齟齬の低減 / コミュニケーションコスト削減
- 品質・速度・安全性のトレードオフを明示し意思決定を高速化
- タスク粒度/優先度の標準化による計画とレビュー効率化

## 2. ロール定義

| ロール | 説明                                   | 主責務                             |
| ------ | -------------------------------------- | ---------------------------------- |
| Dev    | 個人開発者。方向性決定・マージ権限保持 | ゴール設定 / 最終判断              |
| AI     | AI コーディングアシスタント            | 代替案提示 / 実装 / 品質ゲート支援 |

## 3. タスク分類スキーマ

| 種別     | 目的                 | 代表例                       | 完了判定              | 推奨ラベル  |
| -------- | -------------------- | ---------------------------- | --------------------- | ----------- |
| feat     | 機能追加             | 新UI, API呼出                | 仕様/AC満たす         | `feat:`     |
| fix      | 不具合修正           | バグ / 例外 / レイアウト崩れ | 再現手順で再現不可    | `fix:`      |
| perf     | 性能改善             | bundle縮小, レイテンシ低減   | 指標改善 ≥ 10%        | `perf:`     |
| refactor | 構造改善             | 責務分離                     | テスト緑/挙動不変     | `refactor:` |
| chore    | 付帯作業             | 依存更新, CI設定             | 目的ファイル差分のみ  | `chore:`    |
| docs     | 文書                 | README更新                   | 内容反映/リンク有効   | `docs:`     |
| test     | テスト強化           | カバレッジ拡大               | 新/既存テスト緑       | `test:`     |
| ci       | 自動化               | GitHub Actions               | 成功/失敗通知         | `ci:`       |
| security | 脆弱性対策           | depアップグレード            | 脆弱性解消            | `security:` |
| a11y     | アクセシビリティ改善 | コントラスト修正             | axe 違反 0/基準クリア | `a11y:`     |

## 4. 優先度レベル

| レベル | 基準                                       | 目安 SLA           |
| ------ | ------------------------------------------ | ------------------ |
| P0     | ビルド不能 / 重大セキュリティ / データ破壊 | 即時 (当日)        |
| P1     | ユーザー影響大 (主要経路不具合)            | 1-2日              |
| P2     | 一般改善 / 機能追加                        | スプリント内       |
| P3     | 将来価値・低緊急                           | backlog / 月次検討 |

## 5. 品質ゲート (提案)

| ゲート      | 指標               | 最低ライン(初期) | 将来目標                   |
| ----------- | ------------------ | ---------------- | -------------------------- |
| Lint        | ESLint error 0     | 100% パス        | 維持                       |
| Type Check  | `tsc --noEmit`     | error 0          | 維持                       |
| Test        | Vitest pass rate   | 90%+ pass        | 95%+                       |
| Coverage    | line               | 50% 以上         | 70% → 80% → 90% 段階引上げ |
| A11y        | axe / 手動チェック | 重大違反 0       | 0 維持                     |
| Bundle      | main chunk         | < 250KB gzip     | < 180KB gzip               |
| Performance | LCP (CI計測)       | < 3.0s           | < 2.0s                     |
| PWA         | Lighthouse PWA     | 70+              | 90+                        |

## 6. 判定基準詳細

- "完了" は PR マージ可能状態+品質ゲート通過
- 例外 (納期/緊急fix) は `// TODO(debt:<理由>)` コメントで技術的負債を明示
- 技術的負債は週次で棚卸し (タグ: `debt`)

## 7. 更新ワークフロー

1. 変更案: Issue/PR で `docs(glossary): update section X` タイトル
2. 理由: 目的/背景/トレードオフ明示 (Why)
3. 承認: Dev がレビュー (軽微ならセルフマージ可)
4. 版管理: セクション末尾に `Last-Updated: YYYY-MM-DD` 追記/更新

## 8. 共通用語 (初期セット)

| 用語                     | 定義                 | 補足                     |
| ------------------------ | -------------------- | ------------------------ |
| AC (Acceptance Criteria) | 受入条件             | Gherkin/箇条書どちらも可 |
| DX                       | Developer Experience | 開発体験指標             |
| Debt                     | 技術的負債           | 優先度再評価対象         |
| Gate                     | 品質関門             | Lint/Test等              |
| Backlog Grooming         | Backlog整理          | 月次レビュー             |
| Fast Fail                | 早期失敗             | 例: 型で事前検出         |
| idempotent               | 冪等性               | 同じ入力で不変な結果     |

## 9. AI へのタスク依頼テンプレ

```
<カテゴリ(feat/fix/refactor/...)> <短い要約>
[背景]
[目的]
[AC]
[制約] (任意)
[優先度] P0-P3
[補足/参考] (任意)
```

### 例

```
feat: Google Map マーカーの遅延ロード最適化
背景: 初回描画で 120 個マーカー同時追加しフリーズ
目的: 初期表示体験改善, 初期 CPU 使用率低下
AC:
 - 画面ロード < 2s (dev 計測)
 - スクロールで追加ロード
 - パフォーマンス計測ログ console.info 出力
優先度: P1
```

## 10. AI 応答期待フォーマット

- 最初: 状況 + 次アクション 1文
- 変更時: 差分要約 (delta) を最小表現
- 複雑: TODO リスト運用 + 各タスク単独進行
- 出力: 不要な繰返し/冗長敬語を避け簡潔

## 11. セキュリティ・プライバシー初期方針

| 項目       | 方針                                                  |
| ---------- | ----------------------------------------------------- |
| Secrets    | `.env` (未コミット) / GitHub Actions Encrypted Secret |
| API Keys   | ローカルのみ保持 / 例示は `FAKE_KEY`                  |
| 依存脆弱性 | 月次 `npm audit` / 重大は即時                         |
| データ削除 | 個人情報保持しない方針                                |

## 12. 今後の拡張候補

- CI: GitHub Actions ワークフロー (lint/test/build/a11y)
- 自動ラベル: PR タイトルプリフィックスで振分け
- 自動バンドルサイズ監視 (bundlesize / size-limit)
- Lighthouse CI 導入

---

Last-Updated: 2025-09-27
