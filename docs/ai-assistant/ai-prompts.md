# AI Assistant Prompts - 実用開発ガイド

> **更新履歴**:

- 2025 年 9 月 16 日 - ドキュメント間整合性最適化、技術バージョン統一
- 2025 年 9 月 14 日 - 使いやすさ向上、成果測定機能強化、技術情報最新化
- 2025 年 9 月 12 日 - TypeScript enum安全性パターン・ESLint設定強化を追加
- 2025 年 9 月 8 日 - ディレクトリレベル・プロジェクトレベルプロンプトを追加、3 段階構造に拡張

**連携ファイル**: `copilot-instructions.md`, `analysis-accuracy-prompt.md`, `README.md`

---

> 💪 **活用のコツ**: まず30秒クイックガイドで状況判断し、#1-#6のファイルレベル改善から始めるのが
> おすすめです。慣れてきたら#D1-#D6ディレクトリレベル、#P1-#P6プロジェクトレベルを活用してください。
> TypeScript enum使用時は一貫性を重視し、テストとの同期を必ず実行してください。React 19.1.1 + TypeScript 5.7.3 + Vite 7.1.4 + PWA 開発での効率的なコード改善
> **プロジェクト**: 佐渡飲食店マップ（個人開発・GitHub Pages）
> **最終更新**: 2025 年 9 月 16 日 | **バージョン**: 10.1 - ドキュメント間整合性最適化

## 🎯 目的・特徴

このプロンプト集は**実際に使いやすい**開発支援を目的とし、以下の特徴があります：

- **18 種類の体系的プロンプト**: 3レベル×6パターンであらゆる状況に対応
- **段階的改善**: 小さな変更から始める安全なアプローチ
- **技術正確性**: 実プロジェクトに基づく正確な技術情報
- **個人開発最適化**: 複雑さより実用性を重視
- **成果測定機能**: 改善効果の可視化と追跡

## 📖 目次

- [🚀 30秒クイックガイド](#-30秒クイックガイド)
- [⚗️ ファイルレベルプロンプト（#1-#6）](#-ファイルレベルプロンプト)
- [📁 ディレクトリレベルプロンプト（#D1-#D6）](#-ディレクトリレベルプロンプト)
- [🏗️ プロジェクトレベルプロンプト（#P1-#P6）](#️-プロジェクトレベルプロンプト)
- [📋 実践的な使い方](#-実践的な使い方)

## 🚀 30秒クイックガイド

### 🎯 プロンプト選択の黄金ルール

```text
状況別簡単選択ガイド:

🚑 緊急時      → #1 修正・強化
🧹 整理時      → #2 整理・清掃
⚡ 重い時      → #3 最適化
🔄 設計改善時  → #4 リファクタ
✨ 技術更新時  → #5 モダナイズ
📊 総合改善時  → #6 包括改善
```

### 🎨 レベル選択の簡単判断

```text
📄 1ファイルだけ    → #1-#6 (ファイルレベル)
📁 フォルダ全体      → #D1-#D6 (ディレクトリレベル)
🏗️ プロジェクト全体  → #P1-#P6 (プロジェクトレベル)
```

### 📝 コピペ用シンプルプロンプト

すぐ使える簡略版プロンプト:

```text
#1 このコードのエラーやバグを修正してください
#2 このコードを整理・清掃してください
#3 このコードのパフォーマンスを最適化してください
#4 このコードをリファクタリングしてください
#5 このコードをReact 19・TypeScript 5.7でモダナイズしてください
#6 このコードを包括的に改善してください
```

## 🚀 クイックガイド

### 🎯 レベル別プロンプト選択

| 対象レベル                     | プロンプト範囲     | 使用場面                 | 例                              |
| ------------------------------ | ------------------ | ------------------------ | ------------------------------- |
| **📄 ファイル（#1-#6）**       | 単一ファイル       | コードレビュー、バグ修正 | `component.tsx`, `hook.ts`      |
| **📁 ディレクトリ（#D1-#D6）** | フォルダ・機能単位 | モジュール改善、構造改善 | `src/components/`, `src/hooks/` |
| **🏗️ プロジェクト（#P1-#P6）** | プロジェクト全体   | アーキテクチャ、技術基盤 | 依存関係、設定、全体設計        |

### 🎯 状況別プロンプト選択

| 状況                    | ファイル (#1-#6) | ディレクトリ (#D1-#D6)   | プロジェクト (#P1-#P6)   |
| ----------------------- | ---------------- | ------------------------ | ------------------------ |
| **🚨 エラー・バグ発生** | `#1 修正・強化`  | `#D1 ディレクトリ修正`   | `#P1 プロジェクト修正`   |
| **🧹 コードが汚い**     | `#2 整理・清掃`  | `#D2 ディレクトリ整理`   | `#P2 プロジェクト整理`   |
| **⚡ 動作が重い**       | `#3 最適化`      | `#D3 ディレクトリ最適化` | `#P3 プロジェクト最適化` |
| **🔄 構造を改善したい** | `#4 リファクタ`  | `#D4 ディレクトリ再構築` | `#P4 アーキテクチャ改善` |
| **✨ 最新技術に更新**   | `#5 モダナイズ`  | `#D5 ディレクトリ更新`   | `#P5 技術スタック更新`   |
| **📊 総合的に改善**     | `#6 包括改善`    | `#D6 ディレクトリ総合`   | `#P6 プロジェクト総合`   |

### 💡 プロンプトの使い分け

#### ファイルレベル（#1-#6）

- **修正（#1）**: エラー・バグの解決、セキュリティ対応
- **整理（#2）**: 見た目・構造の清掃、リーダビリティ向上
- **最適化（#3）**: パフォーマンス改善、効率化
- **リファクタ（#4）**: 設計・アーキテクチャの改善
- **モダナイズ（#5）**: 最新技術・ベストプラクティス採用
- **包括改善（#6）**: 複数の観点からの総合改善

#### ディレクトリレベル（#D1-#D6）

- **ディレクトリ修正（#D1）**: 機能単位でのバグ・エラー解決
- **ディレクトリ整理（#D2）**: フォルダ構造・命名規則の統一
- **ディレクトリ最適化（#D3）**: モジュール間の効率化・依存関係最適化
- **ディレクトリ再構築（#D4）**: 責任分離・モジュール設計の改善
- **ディレクトリ更新（#D5）**: 機能単位での技術更新
- **ディレクトリ総合（#D6）**: 機能エリア全体の包括改善

#### プロジェクトレベル（#P1-#P6）

- **プロジェクト修正（#P1）**: 設定・依存関係・セキュリティの修正
- **プロジェクト整理（#P2）**: 構成・ドキュメント・開発環境の整理
- **プロジェクト最適化（#P3）**: ビルド・デプロイ・CI/CD の最適化
- **アーキテクチャ改善（#P4）**: システム設計・技術選定の見直し
- **技術スタック更新（#P5）**: 基盤技術・フレームワークの更新
- **プロジェクト総合（#P6）**: 品質・保守性・拡張性の全面改善

## ⚡ ファイルレベルプロンプト

### 1. 🛠️ 修正・強化プロンプト

**使用場面**: エラー・バグ・脆弱性対応

```text
このコードを修正・強化してください：

【TypeScript型安全性】
- TypeScript型エラーの解決
- enum値の一貫した使用（文字列リテラル → enum値）
- 型ガード・ユーザー定義型ガードの実装
- Generic・Union Typesの適切な活用
- strictモード対応・any型の排除

【実行時品質】
- 実行時エラー・バグの修正
- セキュリティ脆弱性の対応
- エラーハンドリングの追加
- バリデーション強化
- アクセシビリティ問題の修正
- 安全性・信頼性の向上

【テスト・実装同期】
- テストと実装の一貫性確保
- enum変更時のテスト期待値同期
- 型変更の影響範囲検証
```

### 2. 🧹 整理・清掃プロンプト

**使用場面**: コードレビュー前、品質向上

```text
このコードを整理・清掃してください：
- 未使用要素の削除（インポート・変数・関数）
- デッドコードの除去
- フォーマット・命名規則の統一
- コメントアウトコードの削除
- 重複コードの統合（DRY原則）
- コード品質・可読性の向上
```

### 3. ⚡ 最適化プロンプト

**使用場面**: パフォーマンス改善

```text
このコードを最適化してください：
- 実行速度・レンダリング性能の向上
- メモリ使用量・バンドルサイズの削減
- API呼び出し・ネットワーク処理の効率化
- キャッシュ戦略の実装
- 遅延読み込み・コード分割の適用
- Core Web Vitals 指標の改善
```

### 4. 🔧 リファクタリングプロンプト

**使用場面**: 設計・構造改善

```text
このコードをリファクタリングしてください：
- 関数・コンポーネントの適切な分割
- 責任分離（単一責任原則）
- 複雑なロジックの簡素化
- 可読性・保守性の向上
- 拡張性を考慮した設計
- テスタビリティの改善
```

### 5. 🆕 モダナイズプロンプト

**使用場面**: 技術更新・最新化

```text
このコードをモダナイズしてください：

【React 19新機能】
- Actions API でフォーム処理改善（useActionState、useOptimistic）
- use() hook でPromise・Context処理
- ref as prop（forwardRef不要）
- Document Metadata（title、meta、link）の直接レンダリング
- Custom Elements サポート
- Server Components・Server Actions（該当する場合）

【Vite 7.0新機能】
- Baseline Widely Available ブラウザターゲット
- Environment API（実験的機能）
- Node.js 20.19+ ESM-only 対応
- rolldown-vite（Rust bundler）検討

【TypeScript 5.7】
- 最新型機能の活用
- 型安全性の向上（enum一貫使用パターン）
- 推論の改善
- 厳格な型チェック（@typescript-eslint/no-unsafe-enum-comparison）
- enum vs 文字列リテラルの適切な使い分け
- 型ガード関数による実行時安全性

【Modern Web Standards】
- Web Vitals 2025基準対応
- PWA Manifest v3
- 最新CSS機能（Container Queries、:has()）
- Web Platform APIs
```

### 6. 📈 包括改善プロンプト

**使用場面**: 総合的な品質向上・プロダクションレディ化

```text
このコードを包括的に改善してください：

【ユーザー体験・UX最適化】
- 佐渡飲食店マップ特有のUX向上（観光客・地元ユーザー双方への配慮）
- アクセシビリティ対応（WCAG 2.2 AA準拠・スクリーンリーダー対応）
- レスポンシブ・モバイルファースト設計（PWA機能活用）
- Google Maps Advanced Markers を活用した直感的な地図操作
- 位置情報・検索・フィルタリングのユーザビリティ向上
- Core Web Vitals 最適化（LCP・FID・CLS・INP改善）

【React 19・TypeScript 5.7 現代化】
- Actions API（useActionState・useOptimistic）でフォーム・状態管理改善
- use() hook による Promise・Context 処理の効率化
- ref as prop パターン適用（forwardRef不要化）
- Document Metadata 直接レンダリング（title・meta・link）
- TypeScript enum 安全性パターン（文字列リテラル → enum値）
- 厳格な型ガード・ユーザー定義型ガード実装
- Concurrent Features（startTransition・useDeferredValue）活用

【開発者体験・保守性】
- コード品質・可読性・保守性の総合向上
- テストカバレッジ充実（Vitest 3.2・Testing Library）
- TypeScript 5.7 型システム最大活用（Generic・Union Types）
- ESLint 9・Prettier 最新設定による品質保証
- 開発効率向上（Vite 7 Environment API・Hot Reload）
- デバッグ・トラブルシューティング機能強化

【技術品質・プロダクション対応】
- セキュリティ強化（XSS・CSRF対策・API キー管理）
- エラーハンドリング・ユーザーフレンドリーなエラー表示
- PWA機能最適化（Service Worker・オフライン対応・App Shortcuts）
- GitHub Pages デプロイ最適化（静的ファイル・CDN・キャッシュ戦略）
- Google Maps API 使用量最適化・パフォーマンス改善
- 長期運用・スケーラビリティ・技術的負債の解消
```

## 📁 ディレクトリレベルプロンプト

### D1. 🛠️ ディレクトリ修正プロンプト

**使用場面**: フォルダ・機能単位でのエラー・バグ解決

```text
このディレクトリを修正・強化してください：

【機能レベルの問題解決】
- モジュール間の型エラー・依存関係エラーの解決
- 機能単位でのバグ・不具合の修正
- セキュリティ脆弱性の包括対応
- API統合・外部サービス連携の問題解決
- パフォーマンスボトルネックの特定・修正

【構造・設計の問題】
- ディレクトリ構造・ファイル配置の最適化
- モジュール境界・責任分離の明確化
- 循環依存・結合度の問題解決
- インターフェース・抽象化の改善

【テスト・品質保証】
- 包括的なテストカバレッジの実装
- モック・スタブの適切な設計
- エラーハンドリングの強化
- ログ・デバッグ機能の充実
```

### D2. 🧹 ディレクトリ整理プロンプト

**使用場面**: フォルダ構造・命名規則の統一

```text
このディレクトリを整理・清掃してください：

【ファイル・フォルダ構造】
- 一貫した命名規則の適用
- ファイル・フォルダの論理的配置
- 未使用ファイル・デッドコードの削除
- 重複機能・コードの統合・除去

【インポート・エクスポート】
- index.tsでの適切な公開インターフェース
- 未使用インポートの一括削除
- 相対・絶対パスの統一
- 循環インポートの解決

【コード品質・統一性】
- コーディング規約・フォーマットの統一
- コメント・ドキュメントの整備
-型定義・インターフェースの統一
- エラーメッセージ・ログの標準化
```

### D3. ⚡ ディレクトリ最適化プロンプト

**使用場面**: モジュール間の効率化・依存関係最適化

```text
このディレクトリを最適化してください：

【パフォーマンス最適化】
- モジュールレベルでのコード分割・遅延読み込み
- 不要な再レンダリング・再計算の防止
- メモ化・キャッシング戦略の実装
- バンドルサイズ・読み込み時間の最適化

【依存関係・結合度】
- モジュール間の依存関係の最適化
- 疎結合・高凝集の原則適用
- インターフェース分離・依存性逆転
- 共通ロジックの効率的な抽出

【リソース・データ管理】
- API呼び出し・データフェッチの効率化
- 状態管理・データフローの最適化
- ファイルサイズ・メモリ使用量の削減
- 非同期処理・並列処理の活用
```

### D4. 🔧 ディレクトリ再構築プロンプト

**使用場面**: 責任分離・モジュール設計の改善

```text
このディレクトリをリファクタリングしてください：

【アーキテクチャ・設計】
- Single Responsibility Principle の適用
- 適切な抽象化レベルの設計
- レイヤード・アーキテクチャの実装
- Domain-Driven Design 原則の適用

【モジュール分割・構成】
- 機能・責任に基づく論理的分割
- 再利用可能なコンポーネント設計
- 共通機能・ユーティリティの抽出
- プラグイン・拡張可能なアーキテクチャ

【保守性・拡張性】
- 変更に強い設計・疎結合化
- テスタビリティの向上
- 設定・カスタマイゼーション機能
- 将来の要件変更への対応設計
```

### D5. 🆕 ディレクトリ更新プロンプト

**使用場面**: 機能単位での技術更新

```text
このディレクトリをモダナイズしてください：

【React 19新機能の活用】
- Actions API（useActionState、useOptimistic）の導入
- use() hook でPromise・Context処理の効率化
- ref as prop パターンの適用
- Document Metadata の直接レンダリング
- Concurrent Features の活用

【TypeScript 5.7の活用】
- 最新型システム・推論機能の活用
- 厳格な型チェック・型ガードの実装
- Generic・Union Types の効果的活用
- 型安全性・開発者体験の向上

【現代的なパターン・ベストプラクティス】
- Clean Architecture・SOLID原則の適用
- Custom Hooks・Composition パターン
- Error Boundary・Suspense の活用
- パフォーマンス最適化パターン

【開発ツール・エコシステム】
- ESLint・Prettier の最新設定
- Vite 7 最新機能の活用
- テストツール・ライブラリの更新
- 開発効率向上ツールの導入
```

### D6. 📈 ディレクトリ総合プロンプト

**使用場面**: 機能エリア全体の包括改善

```text
このディレクトリを包括的に改善してください：

【機能・ユーザー体験】
- エンドユーザー価値の最大化
- 使いやすさ・直感性の向上
- エラー処理・ユーザーフィードバック
- アクセシビリティ・多様性対応

【技術的品質】
- コード品質・保守性の向上
- セキュリティ・信頼性の強化
- パフォーマンス・スケーラビリティ
- テスト・品質保証の充実

【開発・運用効率】
- 開発者体験・生産性向上
- ドキュメント・知識共有
- デバッグ・監視機能
- CI/CD・自動化対応

【将来性・拡張性】
- 技術的負債の解消
- 拡張・変更への対応力
- 新技術・ベストプラクティス適用
- 長期メンテナンス性の確保
```

## 🏗️ プロジェクトレベルプロンプト

### P1. 🛠️ プロジェクト修正プロンプト

**使用場面**: 設定・依存関係・セキュリティの修正

```text
このプロジェクトを修正・強化してください：

【設定・環境】
- package.json、tsconfig.json、vite.config.ts の問題解決
- 環境変数・設定ファイルの整備・セキュリティ強化
- ビルド・デプロイ設定の問題修正
- 開発環境・本番環境の設定差異解決

【依存関係・ライブラリ】
- パッケージ脆弱性・セキュリティ問題の解決
- 依存関係の競合・バージョン問題の修正
- 不要・未使用ライブラリの削除
- ライセンス・法的コンプライアンス確保

【基盤・インフラ】
- GitHub Pages・デプロイ設定の問題解決
- PWA・Service Worker の問題修正
- Google Maps API・外部サービス連携の修正
- パフォーマンス・セキュリティ問題の根本解決

【プロジェクト構造】
- ファイル・フォルダ構成の問題解決
- パス解決・モジュール解決の問題修正
- ビルド成果物・アーティファクトの最適化
- プロジェクト全体の一貫性確保
```

### P2. 🧹 プロジェクト整理プロンプト

**使用場面**: 構成・ドキュメント・開発環境の整理

```text
このプロジェクトを整理・清掃してください：

【プロジェクト構成】
- ルートディレクトリ・全体構造の最適化
- 設定ファイル・環境設定の統一・整理
- 不要ファイル・レガシー設定の削除
- プロジェクト規約・ガイドラインの統一

【ドキュメント・情報】
- README・技術ドキュメントの整備・更新
- コメント・説明の統一・充実
- 開発ガイド・オンボーディング資料の整理
- アーキテクチャ・設計ドキュメントの整備

【開発環境・ツール】
- 開発ツール設定の統一・最適化
- IDE・エディタ設定の整備
- 開発スクリプト・自動化の整理
- コード品質・フォーマット設定の統一

【品質管理・プロセス】
- リント・フォーマット設定の統一
- テスト設定・カバレッジ設定の整理
- Git設定・ブランチ戦略の整備
- コードレビュー・品質基準の明確化
```

### P3. ⚡ プロジェクト最適化プロンプト

**使用場面**: ビルド・デプロイ・CI/CD の最適化

```text
このプロジェクトを最適化してください：

【ビルド・バンドル最適化】
- Vite 7 最新機能・Environment API の活用
- コード分割・Tree Shaking の最適化
- バンドルサイズ・読み込み性能の改善
- アセット・リソース最適化

【デプロイ・配信最適化】
- GitHub Pages 最適化・CDN活用
- PWA・オフライン対応の強化
- キャッシング戦略・CDN設定
- 配信速度・グローバル対応

【開発・CI/CD効率化】
- 開発サーバー・ホットリロード最適化
- GitHub Actions・自動化ワークフロー
- テスト実行・並列化の最適化
- デプロイ・リリースプロセスの効率化

【監視・分析・改善】
- パフォーマンス監視・Web Vitals 対応
- エラー監視・ログ分析システム
- ユーザー分析・使用状況の把握
- 継続的改善・フィードバックループ
```

### P4. 🔧 アーキテクチャ改善プロンプト

**使用場面**: システム設計・技術選定の見直し

```text
このプロジェクトのアーキテクチャを改善してください：

【システム設計・アーキテクチャ】
- Clean Architecture・レイヤード設計の強化
- Domain-Driven Design 原則の適用
- マイクロフロントエンド・モジュラー設計
- スケーラブル・保守可能な設計

【技術選定・統合】
- 技術スタック・ライブラリ選定の見直し
- API設計・データフロー最適化
- 状態管理・グローバル設計
- 外部サービス統合・抽象化

【開発・運用アーキテクチャ】
- 開発環境・本番環境アーキテクチャ
- テスト戦略・品質保証アーキテクチャ
- 監視・ログ・エラー処理アーキテクチャ
- セキュリティ・プライバシー設計

【拡張性・将来性】
- プラグイン・拡張アーキテクチャ
- 国際化・多言語対応設計
- パフォーマンス・スケーラビリティ設計
- 技術移行・レガシー対応戦略
```

### P5. 🆕 技術スタック更新プロンプト

**使用場面**: 基盤技術・フレームワークの更新

```text
このプロジェクトの技術スタックを更新してください：

【コア技術更新】
- React 19 最新機能・パターンの全面適用
- TypeScript 5.7 型システム・推論の活用
- Vite 7 最新機能・Baseline Widely Available
- Node.js・npm/pnpm エコシステム更新

【開発ツール・環境】
- ESLint・Prettier・開発ツール最新化
- Vitest・Testing Library テスト環境更新
- GitHub Actions・CI/CD ワークフロー更新
- VS Code・IDE設定・拡張機能更新

【Web技術・標準】
- Web Vitals 2025・パフォーマンス基準
- PWA Manifest v3・Web App標準
- CSS・HTML・Web Platform APIs
- アクセシビリティ・WCAG 2.2 準拠

【プロジェクト基盤】
- パッケージ管理・依存関係戦略
- ビルドシステム・デプロイパイプライン
- セキュリティ・コンプライアンス対応
- ドキュメント・開発プロセス更新
```

### P6. 📈 プロジェクト総合プロンプト

**使用場面**: 品質・保守性・拡張性の全面改善

```text
このプロジェクトを包括的に改善してください：

【ユーザー・ビジネス価値】
- エンドユーザー体験・価値提供の最大化
- 機能・サービス品質の向上
- パフォーマンス・可用性・信頼性
- アクセシビリティ・包括性・多様性対応

【技術・エンジニアリング品質】
- コード品質・アーキテクチャの卓越性
- セキュリティ・プライバシー保護
- テスト・品質保証の包括性
- 技術的負債・レガシー問題の解消

【開発・運用効率性】
- 開発者体験・生産性の最大化
- 自動化・効率化・プロセス改善
- 監視・運用・トラブルシューティング
- 知識共有・ドキュメント・オンボーディング

【持続可能性・将来性】
- 保守性・拡張性・適応性の確保
- 新技術・イノベーション対応力
- コミュニティ・エコシステム連携
- 長期ビジョン・戦略的価値創造
```

## 🔧 実践的な使い方

### 📋 効率的な使用パターン

#### ファイルレベル（頻度：高）

```bash
#1 修正・強化      # エラー・バグ発生時
#2 整理・清掃      # コードレビュー前
#3 最適化         # パフォーマンス問題
```

#### ディレクトリレベル（頻度：中）

```bash
#D1 ディレクトリ修正   # 機能単位の問題解決
#D2 ディレクトリ整理   # モジュール構造見直し
#D3 ディレクトリ最適化 # 機能エリアの効率化
```

#### プロジェクトレベル（頻度：低・高影響）

```bash
#P1 プロジェクト修正   # 設定・環境問題
#P3 プロジェクト最適化 # ビルド・デプロイ最適化
#P5 技術スタック更新   # 大規模技術更新
```

### 🎯 レベル横断的な組み合わせパターン

#### 問題解決フロー（修正系）

```bash
#P1 プロジェクト修正 → #D1 ディレクトリ修正 → #1 修正・強化
```

#### 品質改善フロー（整理系）

```bash
#2 整理・清掃 → #D2 ディレクトリ整理 → #P2 プロジェクト整理
```

#### パフォーマンス改善フロー（最適化系）

```bash
#3 最適化 → #D3 ディレクトリ最適化 → #P3 プロジェクト最適化
```

#### 大規模改善フロー（技術更新系）

```bash
#P5 技術スタック更新 → #D5 ディレクトリ更新 → #5 モダナイズ
```

#### リリース前準備フロー

```bash
#P2 プロジェクト整理 → #D2 ディレクトリ整理 → #2 整理・清掃 → #P1 プロジェクト修正
```

### 📊 段階的改善戦略

#### Phase 1: 安定化（修正・整理）

- **Week 1**: `#P1` プロジェクト設定修正
- **Week 2**: `#D1` 主要ディレクトリ修正
- **Week 3**: `#1` 個別ファイル修正
- **Week 4**: `#2` + `#D2` + `#P2` 全体整理

#### Phase 2: 効率化（最適化）

- **Week 5**: `#P3` ビルド・デプロイ最適化
- **Week 6**: `#D3` 主要機能の最適化
- **Week 7**: `#3` パフォーマンス改善

#### Phase 3: 現代化（更新・改善）

- **Week 8**: `#P5` 技術スタック更新
- **Week 9**: `#D5` 機能単位更新
- **Week 10**: `#5` ファイル単位モダナイズ

#### Phase 4: 総合改善

- **Week 11**: `#P6` プロジェクト総合改善
- **Week 12**: `#D6` + `#6` 包括改善

### ⚠️ 重要な注意点

#### 🎯 開発手順の選択指針

**ケース別推奨アプローチ**:

| 状況                        | 推奨開始レベル                         | 理由                       |
| --------------------------- | -------------------------------------- | -------------------------- |
| **🚨 緊急バグ対応**         | ファイル → ディレクトリ                | 迅速な問題解決を優先       |
| **🏗️ 新規プロジェクト開始** | プロジェクト → ディレクトリ → ファイル | 基盤を固めてから詳細に進む |
| **📈 段階的改善**           | ファイル → ディレクトリ → プロジェクト | 安全性・確実性を重視       |
| **🔄 大規模リファクタ**     | プロジェクト → ディレクトリ → ファイル | 設計から実装へ段階的に     |

**一般的な推奨順序**:

1. **初期・緊急時**: ファイルレベルから（`#1-#6`）
2. **安定期・計画的改善**: プロジェクトレベルから（`#P1-#P6`）

#### 作業順序の原則

1. **下から上へ**: ファイル → ディレクトリ → プロジェクト
2. **修正から改善へ**: 修正 → 整理 → 最適化 → 更新 → 総合
3. **影響範囲を考慮**: 小さな変更から大きな変更へ

#### 品質保証

- **各段階でテスト**: プロンプト適用後は必ずテスト実行
- **段階的コミット**: レベル・プロンプト単位でコミット
- **ロールバック準備**: 重要変更前は必ずバックアップ

#### 効率性重視

- **実用性優先**: 複雑な機能より実践的な改善
- **継続的改善**: 一度に全てではなく段階的に実施
- **成果測定**: 改善効果を定量的に測定・評価

### 📊 技術リファレンス

### 🎯 プロジェクト技術スタック

- React 19.1.1 + TypeScript 5.7.3 + Vite 7.1.4
- @vis.gl/react-google-maps 1.5.5
- PWA + GitHub Pages
- ESLint 9 + Vitest 3.2

### 🚀 重要なベストプラクティス (2025年版)

#### TypeScript 5.7.3 Enum 安全性パターン

```typescript
// ✅ 推奨：enum値の一貫した使用
export enum RestaurantStatus {
  OPEN = "営業中",
  CLOSED = "閉店中",
  UNKNOWN = "不明",
}

// ✅ 正しいパターン
if (status === RestaurantStatus.OPEN) {
  return "営業中です";
}

// ❌ 禁止パターン
if (status === "営業中") {
  // 文字列リテラル使用
  return "営業中です";
}

// ✅ テスト実装の同期
// 実装変更時はテストも必ず更新
expect(calculateBusinessStatus(hours)).toBe(RestaurantStatus.OPEN);
```

#### ESLint Enum 安全性ルール

```javascript
// eslint.config.js - enum安全性ルール
"@typescript-eslint/no-unsafe-enum-comparison": "error",
"@typescript-eslint/prefer-literal-enum-member": "error",
"@typescript-eslint/prefer-enum-initializers": "warn",
```

#### React 19.1 Actions パターン

```typescript
// useActionState でフォーム処理
const [error, submitAction, isPending] = useActionState(async (previousState, formData) => {
  const result = await updateData(formData);
  if (result.error) return result.error;
  return null;
}, null);

// useOptimistic で楽観的更新
const [optimisticData, setOptimisticData] = useOptimistic(data);

// use() hook でPromise処理
function RestaurantList({ restaurantPromise }: { restaurantPromise: Promise<Restaurant[]> }) {
  const restaurants = use(restaurantPromise);
  return <RestaurantGrid restaurants={restaurants} />;
}
```

#### Google Maps Advanced Markers 効率活用

```typescript
// @vis.gl/react-google-maps の効率的使用
import { Map, AdvancedMarker } from "@vis.gl/react-google-maps";

function RestaurantMap() {
  return (
    <Map defaultCenter={{ lat: 38.0, lng: 138.4 }}>
      {restaurants.map((restaurant) => (
        <AdvancedMarker key={restaurant.id} position={restaurant.position}>
          <CustomRestaurantPin restaurant={restaurant} />
        </AdvancedMarker>
      ))}
    </Map>
  );
}
```

#### Vite 7.1.4 Environment API 活用例

```typescript
// vite.config.ts - Environment APIの実験的機能
export default defineConfig({
  environments: {
    web: {
      build: {
        outDir: "dist/web",
      },
    },
    ssr: {
      build: {
        outDir: "dist/ssr",
        ssr: true,
      },
    },
  },
});
```

#### TypeScript 5.7 型安全性

```typescript
// 厳格な型定義
interface Restaurant {
  readonly id: string;
  readonly name: string;
  readonly position: {
    readonly lat: number;
    readonly lng: number;
  };
}

// 型ガード関数
function isValidRestaurant(data: unknown): data is Restaurant {
  return typeof data === "object" && data !== null && "id" in data && "name" in data && "position" in data;
}
```

### 📱 PWA・パフォーマンス最適化

```typescript
// Service Worker with Vite PWA
import { VitePWA } from "vite-plugin-pwa";

VitePWA({
  registerType: "autoUpdate",
  workbox: {
    runtimeCaching: [
      {
        urlPattern: /^https:\/\/maps\.googleapis\.com\/.*/i,
        handler: "StaleWhileRevalidate",
        options: {
          cacheName: "google-maps-cache",
          expiration: { maxAgeSeconds: 60 * 60 * 24 * 30 },
        },
      },
    ],
  },
});
```

### 📚 最新技術ドキュメント

**詳細な技術仕様・実装パターン**: `copilot-instructions.md` を参照

- [React 19.1.1](https://react.dev/) - Actions、useActionState、use() hook
- [TypeScript 5.7.3](https://www.typescriptlang.org/) - 型システム改善、enum安全性
- [Vite 7.1.4](https://vitejs.dev/) - Environment API、Baseline Widely Available
- [Google Maps Advanced Markers](https://developers.google.com/maps/documentation/javascript/advanced-markers)
- [@vis.gl/react-google-maps](https://visgl.github.io/react-google-maps/)
- [Web.dev](https://web.dev/) - Web Vitals、PWA、Performance

---

**更新履歴**:

- 2025 年 9 月 12 日 - TypeScript enum安全性パターン・ESLint設定強化を追加
- 2025 年 9 月 8 日 - ディレクトリレベル・プロジェクトレベルプロンプトを追加、3 段階構造に拡張

**連携**: `copilot-instructions.md` (自動)

---

> 💡 **使い方のコツ**: まずは #1-#3 のファイルレベル改善から始め、慣れてから #D1-#D6 ディレクトリレベル、#P1-#P6 プロジェクトレベルを活用することをおすすめします。TypeScript enum使用時は一貫性を重視し、テストとの同期を忘れずに。
